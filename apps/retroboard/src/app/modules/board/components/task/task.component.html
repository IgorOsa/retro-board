<mat-card [cdkDragData]="task" class="column__box" cdkDrag>
  <mat-card-title>
    {{ task.title }}
  </mat-card-title>
  <div style="position: absolute; top: 0; right: 0">
    <button
      mat-icon-button
      [matMenuTriggerFor]="menu"
      aria-label="Task menu icon-button"
      #menuTrigger
    >
      <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #menu="matMenu">
      <button mat-menu-item (click)="openDeleteDialog(task._id)">
        <mat-icon>delete</mat-icon>
        <span>Delete</span>
      </button>
    </mat-menu>
  </div>
  <mat-card-actions>
    <retro-board-like
      [taskId]="task._id"
      (isLoading)="setLoading($event)"
    ></retro-board-like>
    <retro-board-comment-button
      [commentsLength]="comments.length"
      (toggleCommentForm)="toggleCommentForm()"
    ></retro-board-comment-button>
  </mat-card-actions>
  <retro-board-comment-form
    *ngIf="showCommentForm"
    (submitCommentEvent)="addComment($event)"
  ></retro-board-comment-form>
  <retro-board-comments
    *ngIf="showCommentForm"
    [taskId]="task._id"
    [comments]="comments"
  ></retro-board-comments>
  <mat-card-footer>
    <mat-progress-bar mode="indeterminate" *ngIf="isLoading"></mat-progress-bar>
  </mat-card-footer>
</mat-card>
